{"version":3,"sources":["webpack:///./src/views/Swiper/addSwiper.vue?c6b8","webpack:///src/views/Swiper/addSwiper.vue","webpack:///./src/views/Swiper/addSwiper.vue?457a","webpack:///./src/views/Swiper/addSwiper.vue","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/components/UploadImg.vue?ce7d","webpack:///./src/views/Swiper/addSwiper.vue?22d8","webpack:///./src/components/UploadImg.vue?ecd6","webpack:///src/components/UploadImg.vue","webpack:///./src/components/UploadImg.vue?3aa1","webpack:///./src/components/UploadImg.vue?fe50"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","slot","_v","ref","model","formData","status-icon","rules","size","label-width","label-position","label","prop","callback","$$v","$set","min","max","_n","active-value","inactive-value","active-text","inactive-text","isEdit","type","on","click","$event","editForm","addForm","cancelForm","resetForm","staticRenderFns","addSwipervue_type_script_lang_js_","components","uploadImg","UploadImg","data","title","pic","sort","status","loading","required","message","trigger","methods","form","_this","$refs","validate","valid","$message","duration","center","$axios","post","then","res","code","msg","setTimeout","$router","push","catch","err","_this2","getData","_this3","get","concat","userId","_this4","resetFields","computed","Object","objectSpread","vuex_esm","created","$route","watch","to","Swiper_addSwipervue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","dP","__webpack_require__","f","FProto","Function","prototype","nameRE","NAME","configurable","match","e","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UploadImg_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UploadImg_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_addSwiper_vue_vue_type_style_index_0_id_1a5a577b_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_addSwiper_vue_vue_type_style_index_0_id_1a5a577b_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","action","show-file-list","on-success","handleAvatarSuccess","before-upload","beforeAvatarUpload","src","imageUrl","UploadImgvue_type_script_lang_js_","props","String","token","file","url","$emit","isJPG","isLt2M","error","getToken","val","console","log","components_UploadImgvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-640c61c0.d18e6caf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"swiper-wrap\"},[_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"添加轮播图\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.formData,\"status-icon\":\"\",\"rules\":_vm.rules,\"size\":\"mini\",\"label-width\":\"110px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"轮播图标题：\",\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.formData.title),callback:function ($$v) {_vm.$set(_vm.formData, \"title\", $$v)},expression:\"formData.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"缩略图：\",\"prop\":\"pic\"}},[_c('uploadImg',{staticClass:\"uploadImg\",model:{value:(_vm.formData.pic),callback:function ($$v) {_vm.$set(_vm.formData, \"pic\", $$v)},expression:\"formData.pic\"}})],1),_c('el-form-item',{attrs:{\"label\":\"排序：\",\"prop\":\"sort\"}},[_c('el-input-number',{attrs:{\"min\":1,\"max\":999},model:{value:(_vm.formData.sort),callback:function ($$v) {_vm.$set(_vm.formData, \"sort\", _vm._n($$v))},expression:\"formData.sort\"}})],1),_c('el-form-item',{attrs:{\"label\":\"轮播图状态：\",\"prop\":\"status\"}},[_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0,\"active-text\":\"启用\",\"inactive-text\":\"禁止\"},model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", _vm._n($$v))},expression:\"formData.status\"}})],1),_c('el-form-item',[(!_vm.isEdit)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addForm('form')}}},[_vm._v(\"添加\")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.editForm('form')}}},[_vm._v(\"编辑\")]),(!_vm.isEdit)?_c('el-button',{on:{\"click\":function($event){_vm.resetForm('form')}}},[_vm._v(\"重置\")]):_c('el-button',{on:{\"click\":_vm.cancelForm}},[_vm._v(\"取消\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"swiper-wrap\">\r\n        <el-card v-loading=\"loading\">\r\n            <div slot=\"header\">添加轮播图</div>\r\n            <el-form :model=\"formData\" ref='form' status-icon :rules=\"rules\" size='mini' label-width=\"110px\" label-position=\"right\">\r\n                <el-form-item label='轮播图标题：' prop='title'>\r\n                    <el-input v-model=\"formData.title\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label='缩略图：' prop='pic'>\r\n                    <uploadImg class=\"uploadImg\" v-model=\"formData.pic\"></uploadImg> <!--注意自定义组件中的v-model-->\r\n                </el-form-item>\r\n                <el-form-item label='排序：' prop='sort'>\r\n                        <el-input-number v-model.number=\"formData.sort\" :min=\"1\" :max=\"999\"></el-input-number>\r\n                </el-form-item>\r\n                <el-form-item label='轮播图状态：' prop='status'>\r\n                    <el-switch v-model.number=\"formData.status\" :active-value='1' :inactive-value='0' active-text=\"启用\" inactive-text=\"禁止\">\r\n                    </el-switch>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button v-if=\"!isEdit\" type=\"primary\" @click=\"addForm('form')\">添加</el-button>\r\n                    <el-button v-else type=\"primary\" @click=\"editForm('form')\">编辑</el-button>\r\n                    <el-button v-if=\"!isEdit\" @click=\"resetForm('form')\">重置</el-button>\r\n                    <el-button v-else @click=\"cancelForm\">取消</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport uploadImg from \"@/components/UploadImg\";\r\nimport {mapState} from \"vuex\";\r\nexport default {\r\n    name: \"addSwiper\",\r\n    components: {uploadImg},\r\n    data() {\r\n        return {\r\n            formData: {\r\n                title: \"\",\r\n                pic: \"\",\r\n                sort: 1,\r\n                status: 1,\r\n            },\r\n            loading: true,\r\n            isEdit: false,\r\n            rules: {\r\n                title: [\r\n                    {required: true, message: \"请输入轮播图标题!\", trigger: \"blur\"}\r\n                ],\r\n                pic: [\r\n                    {type: \"string\", message: \"请上传轮播图！\", trigger: \"blur\"}\r\n                ],\r\n                sort: [\r\n                    {required: true, message: \"请设置排序值!\", trigger: \"blur\"}\r\n                ],\r\n                status: [\r\n                    {required: true, message: \"状态判断是数字!\", trigger: \"blur\"}\r\n                ],\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        // 1. 提交添加\r\n        addForm(form) {\r\n            this.$refs[form].validate(valid => {\r\n                if(valid) {\r\n                    this.$axios.post(`/swiper/addSwiper`, this.formData)\r\n                        .then(res => {\r\n                            if(res.code === 200) {\r\n                                this.$message({\r\n                                    message: res.msg,\r\n                                    type: \"success\",\r\n                                    duration: 1000,\r\n                                    center: true\r\n                                });\r\n                                setTimeout(() => {this.$router.push(\"/layout/swiper\")}, 500);\r\n                            } else {\r\n                                this.$message({\r\n                                    message: res.msg,\r\n                                    type: \"error\",\r\n                                    duration: 1000,\r\n                                    center: true\r\n                                });\r\n                            }\r\n                        })\r\n                        .catch(err => {\r\n                            this.$message({\r\n                                message: \"网络链接错误!\" + err,\r\n                                type: \"error\",\r\n                                duration: 1000,\r\n                                center: true\r\n                            });\r\n                        })\r\n                } else {\r\n                    this.$message({\r\n                        message: \"数据格式不正确!\",\r\n                        type: \"error\",\r\n                        duration: 1000,\r\n                        center: true\r\n                    });\r\n                    return false;\r\n                }\r\n            })\r\n        },\r\n\r\n        // 2. 提交编辑\r\n        editForm(form) {\r\n            this.$refs[form].validate(valid => {\r\n                if(valid) {\r\n                    this.$axios.post(`/swiper/editSwiper`, this.formData)\r\n                        .then(res => {\r\n                            if(res.code === 200) {\r\n                                this.$message({\r\n                                    message: res.msg,\r\n                                    type: \"success\",\r\n                                    duration: 1000,\r\n                                    center: true\r\n                                });\r\n                                setTimeout(() => this.$router.push(\"/layout/swiper\"), 500);\r\n                            } else {\r\n                                this.$message({\r\n                                    message: res.msg,\r\n                                    type: \"error\",\r\n                                    duration: 1000,\r\n                                    center: true\r\n                                });\r\n                            }\r\n                        })\r\n                        .catch(err => {\r\n                            this.$message({\r\n                                message: \"网络链接错误!\" + err,\r\n                                type: \"error\",\r\n                                duration: 1000,\r\n                                center: true\r\n                            });\r\n                        })\r\n                } else {\r\n                    this.$message({\r\n                        message: \"请完善数据内容!\",\r\n                        type: \"error\",\r\n                        duration: 1000,\r\n                        center: true\r\n                    });\r\n                    return false;\r\n                }\r\n            })\r\n        },\r\n\r\n        // 3. 获得单个编辑的数据--> 这时候就体现出来了vuex的好处啊\r\n        getData() {\r\n            this.loading = true;\r\n            this.$axios.get(`/swiper/getOneSwiper/?id=${this.userId}`)\r\n                .then(res => {\r\n                    if(res.code === 200) {\r\n                        this.loading = false;\r\n                        this.formData = res.data;\r\n                    } else {\r\n                        this.loading = false;\r\n                        this.$message({\r\n                            message: res.msg,\r\n                            type: \"error\",\r\n                            duration: 1000,\r\n                            center: true\r\n                        });\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    this.loading = false;\r\n                    this.$message({\r\n                        message: \"网络链接错误!\" + err,\r\n                        type: \"error\",\r\n                        duration: 1000,\r\n                        center: true\r\n                    });\r\n                })\r\n        },\r\n\r\n        // 4. 取消\r\n        cancelForm() {\r\n            this.$message({\r\n                message: \"取消修改!\",\r\n                type: \"info\",\r\n                duration: 1000,\r\n                center: true\r\n            });\r\n            setTimeout(() => this.$router.push(\"/layout/swiper\"), 1000);\r\n        },\r\n\r\n        // 5. 重置\r\n        resetForm(form) {\r\n            this.$refs[form].resetFields();\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState([\"userId\"]),\r\n    },\r\n    created() {\r\n        if(this.$route.name === \"addSwiper\") {\r\n            this.loading = false;\r\n            this.isEdit = false;\r\n        } else {\r\n            this.isEdit = true;\r\n            this.getData();\r\n        }\r\n    },\r\n    watch: {\r\n        $route(to) {\r\n            if(to.name === \"addSwiper\") {\r\n                this.loading = false;\r\n                this.isEdit = false;\r\n                this.formData = {}; // 清空编辑页面的数据\r\n            } else {\r\n                this.isEdit = true;\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.newsDetail-wrap {\r\n  display: flex;\r\n  // justify-content: space-between;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  box-sizing: border-box;\r\n  width: 330px;\r\n  height: 105px;\r\n  padding: 5px;\r\n  .newsDetail-img {\r\n    padding: 5px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 5px;\r\n    img {\r\n      border-radius: 5px;\r\n    }\r\n  }\r\n  .newsDetail-content {\r\n    // border: 1px solid #000;\r\n    box-sizing: border-box;\r\n    height: 95px;\r\n    width: 225px;\r\n    padding: 10px;\r\n    .conent-title {\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      width: 200px;\r\n      display: -webkit-box;\r\n      -webkit-box-orient: vertical;\r\n      -webkit-line-clamp: 1;\r\n      overflow: hidden;\r\n      margin-bottom: 5px;\r\n      span {\r\n        font-weight: 600;\r\n      }\r\n    }\r\n    .content {\r\n      font-size: 12px;\r\n      font-weight: 500;\r\n      line-height: 1.5;\r\n      width: 205px;\r\n      display: -webkit-box;\r\n      -webkit-box-orient: vertical;\r\n      -webkit-line-clamp: 3;\r\n      overflow: hidden;\r\n    }\r\n  }\r\n}\r\n.el-input {\r\n  width: 400px;\r\n}\r\n.el-card {\r\n  width: 700px;\r\n  height: calc(100vh - 105px);\r\n}\r\n/deep/ img {\r\n  width: 80px;\r\n  height: 80px;\r\n}\r\n/deep/ .el-upload {\r\n  display: block;\r\n  width: 80px;\r\n}\r\n/deep/ .avatar-uploader-icon {\r\n  font-size: 14px;\r\n  width: 80px;\r\n  height: 80px;\r\n  line-height: 80px;\r\n}\r\n/deep/ .avatar {\r\n  width: 80px;\r\n  height: 80px;\r\n}\r\n.el-dialog {\r\n  img {\r\n    width: 60px;\r\n    height: 60px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addSwiper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addSwiper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addSwiper.vue?vue&type=template&id=1a5a577b&scoped=true&\"\nimport script from \"./addSwiper.vue?vue&type=script&lang=js&\"\nexport * from \"./addSwiper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addSwiper.vue?vue&type=style&index=0&id=1a5a577b&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a5a577b\",\n  null\n  \n)\n\ncomponent.options.__file = \"addSwiper.vue\"\nexport default component.exports","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadImg.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadImg.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addSwiper.vue?vue&type=style&index=0&id=1a5a577b&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addSwiper.vue?vue&type=style&index=0&id=1a5a577b&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"https://upload-z1.qiniup.com\",\"data\":_vm.formData,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"https://upload-z1.qiniup.com\"\r\n            :data='formData'\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleAvatarSuccess\"\r\n            :before-upload=\"beforeAvatarUpload\">\r\n        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n    </el-upload>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n  name: \"uploadImg\",\r\n  props:{\r\n      value:String\r\n  },\r\n  data() {\r\n      return {\r\n        imageUrl: this.value,\r\n        formData: {\r\n            token: ''\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n      /**\r\n      * 上传图片成功触发的方法，也即刚上传完以后就会显示图片，试想如果是编辑页面呢？我们要达到的效果就是刚进入编辑页面就能显示图片，\r\n       * 但是显然如果不进行动态的监听，imgUrl就是空的，因为我们本意是想在上传组件拿到父组件传过来的avatar*/\r\n      handleAvatarSuccess(res, file) {\r\n          // console.log(res);\r\n          this.imageUrl = res.url;\r\n          this.$emit('input', this.imageUrl);\r\n      },\r\n      beforeAvatarUpload(file) {\r\n        const isJPG = file.type === 'image/jpeg';\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n        if (!isJPG) {\r\n          this.$message.error('上传头像图片只能是 JPG 格式!');\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error('上传头像图片大小不能超过 2MB!');\r\n        }\r\n        return isJPG && isLt2M;\r\n      },\r\n      getToken(){\r\n          this.$axios.get('/getToken').then(res => {\r\n              // console.log(\"......................\");\r\n              // console.log(res);\r\n              if(res.code === 200){\r\n                  this.formData.token = res.token;\r\n                  // console.log(this.formData.token);\r\n              }else{\r\n                  this.$message({\r\n                    message: 'getToken:' + res.data.msg,\r\n                    type: \"error\",\r\n                    duration: 1000,\r\n                    center: true\r\n                  });\r\n              }\r\n          }).catch(err => {\r\n            this.$message({\r\n                message: \"网络链接错误！\",\r\n                type: \"error\",\r\n                duration: 1000,\r\n                center: true\r\n            });\r\n          })\r\n      },\r\n    },\r\n    created() {\r\n        this.getToken();\r\n    },\r\n    //watch很重要。data（）函数只是在初始化的时候会运行一次。所以总是空。而我们异步过来的数据，需要watch他 才能得到\r\n    watch:{\r\n        value(val){\r\n            // console.log(val);\r\n            this.imageUrl = val;\r\n            console.log(this.value);\r\n            console.log(this.imageUrl);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadImg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadImg.vue?vue&type=template&id=2903d699&\"\nimport script from \"./UploadImg.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadImg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadImg.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"UploadImg.vue\"\nexport default component.exports"],"sourceRoot":""}