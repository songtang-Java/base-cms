(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c1b5366"],{3746:function(e,t,a){},"7f7f":function(e,t,a){var r=a("86cc").f,s=Function.prototype,o=/^\s*function ([^ (]*)/,i="name";i in s||a("9e1e")&&r(s,i,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},"840d":function(e,t,a){"use strict";var r=a("bc7d"),s=a.n(r);s.a},"89ef":function(e,t,a){"use strict";var r=a("3746"),s=a.n(r);s.a},ac6a:function(e,t,a){for(var r=a("cadf"),s=a("0d58"),o=a("2aba"),i=a("7726"),n=a("32e9"),c=a("84f2"),l=a("2b4c"),u=l("iterator"),m=l("toStringTag"),f=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=s(d),p=0;p<g.length;p++){var h,b=g[p],v=d[b],y=i[b],D=y&&y.prototype;if(D&&(D[u]||n(D,u,f),D[m]||n(D,m,b),c[b]=f,v))for(h in r)D[h]||o(D,h,r[h],!0)}},bc7d:function(e,t,a){},d34f:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z1.qiniup.com",data:e.formData,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},s=[],o=(a("cadf"),a("551c"),a("097d"),a("bc3a"),{name:"uploadImg",props:{value:String},data:function(){return{imageUrl:this.value,formData:{token:""}}},methods:{handleAvatarSuccess:function(e,t){this.imageUrl=e.url,this.$emit("input",this.imageUrl)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getToken:function(){var e=this;this.$axios.get("/getToken").then(function(t){200===t.code?e.formData.token=t.token:e.$message({message:"getToken:"+t.data.msg,type:"error",duration:1e3,center:!0})}).catch(function(t){e.$message({message:"网络链接错误！",type:"error",duration:1e3,center:!0})})}},created:function(){this.getToken()},watch:{value:function(e){this.imageUrl=e,console.log(this.value),console.log(this.imageUrl)}}}),i=o,n=(a("89ef"),a("2877")),c=Object(n["a"])(i,r,s,!1,null,null,null);c.options.__file="UploadImg.vue";t["a"]=c.exports},eb69:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"news-wrap"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini","label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"新闻标题：",prop:"title"}},[a("el-input",{model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:"新闻作者：",prop:"author"}},[a("el-input",{model:{value:e.formData.author,callback:function(t){e.$set(e.formData,"author",t)},expression:"formData.author"}})],1),a("el-form-item",{attrs:{label:"新闻描述：",prop:"newsDesc"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.formData.newsDesc,callback:function(t){e.$set(e.formData,"newsDesc",t)},expression:"formData.newsDesc"}})],1),a("el-form-item",{attrs:{label:"新闻类型：",prop:"author"}},[a("el-select",{model:{value:e.formData.newsType,callback:function(t){e.$set(e.formData,"newsType",t)},expression:"formData.newsType"}},e._l(e.categories,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),a("el-form-item",{attrs:{label:"新闻图片：",prop:"img"}},[a("uploadImg",{staticClass:"uploadImg",model:{value:e.formData.img,callback:function(t){e.$set(e.formData,"img",t)},expression:"formData.img"}})],1),a("el-form-item",{staticClass:"contentText",attrs:{label:"新闻内容：",prop:"contentText"}},[a("el-col",{attrs:{span:24}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"ql-editor",attrs:{options:e.editorOption},on:{change:e.handleChange},model:{value:e.formData.contentText,callback:function(t){e.$set(e.formData,"contentText",t)},expression:"formData.contentText"}})],1)],1),a("el-form-item",[e.isEdit?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editForm("form")}}},[e._v("修改")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("发布")]),e.isEdit?a("el-button",{on:{click:e.cancelForm}},[e._v("取消")]):a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)],1)},s=[],o=(a("7f7f"),a("ac6a"),a("c93e")),i=a("d34f"),n=a("2f62"),c={name:"addNews",data:function(){return{loading:!0,isEdit:!1,formData:{title:"",newsDesc:"",contentText:"",img:"",author:"",newsType:""},rules:{title:[{required:!0,message:"请输入新闻标题！",trigger:"blur"}],author:[{required:!0,message:"请选择新闻作者！",trigger:"blur"}],newsDesc:[{required:!0,message:"请编写新闻描述！",trigger:"blur"}],img:[{required:!0,message:"请上传新闻头图！",trigger:"blur"}],newsType:[{required:!0,message:"请选择新闻类型！",trigger:"blur"}],contentText:[{required:!0,message:"请选输入新闻内容！",trigger:"blur"}]},users:[],categories:[],editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}}}},computed:Object(o["a"])({},Object(n["b"])(["userId"])),components:{UploadImg:i["a"]},methods:{handleChange:function(e){e.quill,e.html,e.text},getUsers:function(){var e=this;this.$axios.get("/users/getUsers").then(function(t){200===t.code?t.data.forEach(function(t){e.users.push(t.username)}):e.$message({message:"获取用户列表失败！",type:"error",duration:1e3,center:!0})}).catch(function(t){e.$message({message:"捕捉信息失败！",type:"error",duration:1e3,center:!0})})},getCategories:function(){var e=this;this.$axios.get("/categories/getCategories").then(function(t){200===t.code?t.data.forEach(function(t){e.categories.push(t.newsType)}):e.$message({message:"获取新闻类型列表失败！",type:"error",duration:1e3,center:!0})}).catch(function(t){e.$message({message:"捕捉信息失败！",type:"error",duration:1e3,center:!0})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$axios.post("/news/addNews",t.formData).then(function(e){200===e.code?(t.$message({message:e.msg,type:"success",duration:1e3,center:!0}),setTimeout(function(){t.$router.push("/layout/news")},500)):t.$message({message:e.msg,type:"error",duration:1e3,center:!0})}).catch(function(e){t.$message({message:"网络链接错误!"+e,type:"error",duration:1e3,center:!0})})})},editForm:function(e){},resetForm:function(e){this.$refs[e].resetFields()},cancelForm:function(){var e=this;this.$message({message:"取消修改!",type:"info",duration:1e3,center:!0}),setTimeout(function(){return e.$router.push("/layout/news")},1e3)},getTheNews:function(){var e=this;this.loading=!0,this.$axios.get("/news/getTheNews/".concat(this.userId)).then(function(t){200===t.code?(e.loading=!1,e.formData=t.data):(e.loading=!1,e.$message({message:t.msg,type:"error",duration:1e3,center:!0}))}).catch(function(t){e.loading=!1,e.$message({message:"网络链接错误!"+t,type:"error",duration:1e3,center:!0})})}},created:function(){this.getCategories(),"addNews"===this.$route.name?(this.loading=!1,this.isEdit=!1):(this.isEdit=!0,this.getTheNews())}},l=c,u=(a("840d"),a("2877")),m=Object(u["a"])(l,r,s,!1,null,"6f908988",null);m.options.__file="addNews.vue";t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-4c1b5366.2db4aec9.js.map