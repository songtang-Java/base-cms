(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-640c61c0"],{"09c8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"swiper-wrap"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("添加轮播图")]),a("el-form",{ref:"form",attrs:{model:e.formData,"status-icon":"",rules:e.rules,size:"mini","label-width":"110px","label-position":"right"}},[a("el-form-item",{attrs:{label:"轮播图标题：",prop:"title"}},[a("el-input",{model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:"缩略图：",prop:"pic"}},[a("uploadImg",{staticClass:"uploadImg",model:{value:e.formData.pic,callback:function(t){e.$set(e.formData,"pic",t)},expression:"formData.pic"}})],1),a("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[a("el-input-number",{attrs:{min:1,max:999},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",e._n(t))},expression:"formData.sort"}})],1),a("el-form-item",{attrs:{label:"轮播图状态：",prop:"status"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"启用","inactive-text":"禁止"},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",e._n(t))},expression:"formData.status"}})],1),a("el-form-item",[e.isEdit?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editForm("form")}}},[e._v("编辑")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addForm("form")}}},[e._v("添加")]),e.isEdit?a("el-button",{on:{click:e.cancelForm}},[e._v("取消")]):a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)],1)},s=[],i=(a("7f7f"),a("c93e")),o=(a("cadf"),a("551c"),a("097d"),a("d34f")),n=a("2f62"),c={name:"addSwiper",components:{uploadImg:o["a"]},data:function(){return{formData:{title:"",pic:"",sort:1,status:1},loading:!0,isEdit:!1,rules:{title:[{required:!0,message:"请输入轮播图标题!",trigger:"blur"}],pic:[{type:"string",message:"请上传轮播图！",trigger:"blur"}],sort:[{required:!0,message:"请设置排序值!",trigger:"blur"}],status:[{required:!0,message:"状态判断是数字!",trigger:"blur"}]}}},methods:{addForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"数据格式不正确!",type:"error",duration:1e3,center:!0}),!1;t.$axios.post("/swiper/addSwiper",t.formData).then(function(e){200===e.code?(t.$message({message:e.msg,type:"success",duration:1e3,center:!0}),setTimeout(function(){t.$router.push("/layout/swiper")},500)):t.$message({message:e.msg,type:"error",duration:1e3,center:!0})}).catch(function(e){t.$message({message:"网络链接错误!"+e,type:"error",duration:1e3,center:!0})})})},editForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"请完善数据内容!",type:"error",duration:1e3,center:!0}),!1;t.$axios.post("/swiper/editSwiper",t.formData).then(function(e){200===e.code?(t.$message({message:e.msg,type:"success",duration:1e3,center:!0}),setTimeout(function(){return t.$router.push("/layout/swiper")},500)):t.$message({message:e.msg,type:"error",duration:1e3,center:!0})}).catch(function(e){t.$message({message:"网络链接错误!"+e,type:"error",duration:1e3,center:!0})})})},getData:function(){var e=this;this.loading=!0,this.$axios.get("/swiper/getOneSwiper/?id=".concat(this.userId)).then(function(t){200===t.code?(e.loading=!1,e.formData=t.data):(e.loading=!1,e.$message({message:t.msg,type:"error",duration:1e3,center:!0}))}).catch(function(t){e.loading=!1,e.$message({message:"网络链接错误!"+t,type:"error",duration:1e3,center:!0})})},cancelForm:function(){var e=this;this.$message({message:"取消修改!",type:"info",duration:1e3,center:!0}),setTimeout(function(){return e.$router.push("/layout/swiper")},1e3)},resetForm:function(e){this.$refs[e].resetFields()}},computed:Object(i["a"])({},Object(n["b"])(["userId"])),created:function(){"addSwiper"===this.$route.name?(this.loading=!1,this.isEdit=!1):(this.isEdit=!0,this.getData())},watch:{$route:function(e){"addSwiper"===e.name?(this.loading=!1,this.isEdit=!1,this.formData={}):this.isEdit=!0}}},u=c,l=(a("a372"),a("2877")),m=Object(l["a"])(u,r,s,!1,null,"1a5a577b",null);m.options.__file="addSwiper.vue";t["default"]=m.exports},"2dc5":function(e,t,a){},3746:function(e,t,a){},"7f7f":function(e,t,a){var r=a("86cc").f,s=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in s||a("9e1e")&&r(s,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},"89ef":function(e,t,a){"use strict";var r=a("3746"),s=a.n(r);s.a},a372:function(e,t,a){"use strict";var r=a("2dc5"),s=a.n(r);s.a},d34f:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z1.qiniup.com",data:e.formData,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},s=[],i=(a("cadf"),a("551c"),a("097d"),a("bc3a"),{name:"uploadImg",props:{value:String},data:function(){return{imageUrl:this.value,formData:{token:""}}},methods:{handleAvatarSuccess:function(e,t){this.imageUrl=e.url,this.$emit("input",this.imageUrl)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getToken:function(){var e=this;this.$axios.get("/getToken").then(function(t){200===t.code?e.formData.token=t.token:e.$message({message:"getToken:"+t.data.msg,type:"error",duration:1e3,center:!0})}).catch(function(t){e.$message({message:"网络链接错误！",type:"error",duration:1e3,center:!0})})}},created:function(){this.getToken()},watch:{value:function(e){this.imageUrl=e,console.log(this.value),console.log(this.imageUrl)}}}),o=i,n=(a("89ef"),a("2877")),c=Object(n["a"])(o,r,s,!1,null,null,null);c.options.__file="UploadImg.vue";t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-640c61c0.d18e6caf.js.map